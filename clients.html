<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Clients - Legal Case Management System</title>
    <link
      href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css"
      rel="stylesheet"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/@mdi/font@7.2.96/css/materialdesignicons.min.css"
      rel="stylesheet"
    />
    <style>
      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(10px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }
      @keyframes slideInLeft {
        from {
          transform: translateX(-20px);
          opacity: 0;
        }
        to {
          transform: translateX(0);
          opacity: 1;
        }
      }
      .animate-fade-in {
        animation: fadeIn 0.4s ease-out forwards;
      }
      .animate-slide-in {
        animation: slideInLeft 0.3s ease-out forwards;
      }
      .sidebar-link {
        transition: all 0.3s ease;
      }
      .sidebar-link:hover {
        background-color: rgba(59, 130, 246, 0.1);
        padding-left: 1.5rem;
      }
      .sidebar-link.active {
        border-left: 4px solid #3b82f6;
        background-color: rgba(59, 130, 246, 0.1);
        padding-left: 1rem;
      }
      .action-button {
        transition: all 0.3s ease;
      }
      .action-button:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      }
      .hover\:bg-blue-50:hover {
        background-color: #ebf8ff;
      }
    </style>
  </head>
  <body class="bg-gray-100 min-h-screen flex">
    <!-- Sidebar Navigation -->
    <aside
      class="w-64 bg-blue-600 text-white min-h-screen fixed left-0 top-0 z-30 shadow-xl"
    >
      <div class="p-4 flex items-center space-x-2 border-b border-blue-500">
        <span class="mdi mdi-gavel text-3xl"></span>
        <h1 class="text-xl font-bold">LegalCase Pro</h1>
      </div>
      <nav class="mt-6 px-4">
        <a
          href="dashboard.html"
          class="sidebar-link flex items-center space-x-3 p-3 rounded-lg mb-2"
        >
          <span class="mdi mdi-view-dashboard"></span>
          <span>Dashboard</span>
        </a>
        <a
          href="clients.html"
          class="sidebar-link active flex items-center space-x-3 p-3 rounded-lg mb-2"
        >
          <span class="mdi mdi-account-group"></span>
          <span>Clients</span>
        </a>
        <a
          href="cases.html"
          class="sidebar-link flex items-center space-x-3 p-3 rounded-lg mb-2"
        >
          <span class="mdi mdi-briefcase"></span>
          <span>Cases</span>
        </a>
        <a
        href="analyzer.html"
        class="sidebar-link flex items-center space-x-3 p-3 rounded-lg mb-2"
      >
        <span class="mdi mdi-briefcase"></span>
        <span>Cases</span>
      </a>
      </nav>
      <div
        class="absolute bottom-0 left-0 right-0 p-4 border-t border-blue-500"
      >
        <div class="flex items-center space-x-3">
          <img
            src="https://via.placeholder.com/40"
            alt="Profile"
            class="w-10 h-10 rounded-full border-2 border-white"
          />
          <div>
            <p class="font-medium">John Lawyer</p>
            <p class="text-sm text-blue-200">Administrator</p>
          </div>
        </div>
      </div>
    </aside>

    <!-- Main Content -->
    <main class="ml-64 flex-1 flex flex-col">
      <!-- Top Navigation -->
      <header class="bg-white shadow-md p-4 flex justify-between items-center">
        <div class="flex items-center">
          <h2 class="text-xl font-bold text-gray-800">Client Management</h2>
        </div>
        <div class="flex items-center space-x-4">
          <div class="relative">
            <input
              type="search"
              placeholder="Search clients..."
              class="px-4 py-2 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500 w-64"
            />
            <button class="absolute right-2 top-2 text-gray-400">
              <span class="mdi mdi-magnify"></span>
            </button>
          </div>
          <div class="flex items-center space-x-2">
            <span class="mdi mdi-bell text-gray-600 text-xl relative">
              <span
                class="absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-4 h-4 flex items-center justify-center"
                >3</span
              >
            </span>
          </div>
        </div>
      </header>

      <!-- Quick Action Buttons -->
      <section
        class="p-6 animate-fade-in grid grid-cols-1 md:grid-cols-4 gap-4"
      >
        <!-- Clickable Add Client button -->
        <a
          href="add-client.html"
          class="action-button bg-blue-500 text-white p-4 rounded-lg flex items-center justify-between shadow-md cursor-pointer"
        >
          <div>
            <span class="mdi mdi-account-plus text-2xl"></span>
            <p class="font-semibold">Add Client</p>
          </div>
          <span class="mdi mdi-chevron-right"></span>
        </a>
        <button
          class="action-button bg-green-500 text-white p-4 rounded-lg flex items-center justify-between shadow-md"
        >
          <div>
            <span class="mdi mdi-format-list-text text-2xl"></span>
            <p class="font-semibold">Generate Report</p>
          </div>
          <span class="mdi mdi-chevron-right"></span>
        </button>
        <button
          class="action-button bg-red-500 text-white p-4 rounded-lg flex items-center justify-between shadow-md"
        >
          <div>
            <span class="mdi mdi-file-send text-2xl"></span>
            <p class="font-semibold">Send Email</p>
          </div>
          <span class="mdi mdi-chevron-right"></span>
        </button>
        <button
          class="action-button bg-yellow-500 text-white p-4 rounded-lg flex items-center justify-between shadow-md"
        >
          <div>
            <span class="mdi mdi-note-text text-2xl"></span>
            <p class="font-semibold">Create Note</p>
          </div>
          <span class="mdi mdi-chevron-right"></span>
        </button>
      </section>

      <!-- Client List Section -->
      <section class="px-6 pb-6">
        <div
          class="bg-white rounded-xl shadow-lg overflow-hidden animate-fade-in"
          style="animation-delay: 0.2s"
        >
          <!-- Table Header -->
          <div class="p-4 bg-gray-50 flex items-center justify-between">
            <h2 class="text-xl font-semibold">Client Directory</h2>
            <div class="flex items-center space-x-3">
              <button
                class="p-2 hover:bg-gray-200 rounded-lg flex items-center space-x-1"
              >
                <span class="mdi mdi-filter-variant"></span>
                <span class="text-sm">Filter</span>
              </button>
              <button
                class="p-2 hover:bg-gray-200 rounded-lg flex items-center space-x-1"
              >
                <span class="mdi mdi-sort"></span>
                <span class="text-sm">Sort</span>
              </button>
            </div>
          </div>
          <!-- Client Table -->
          <div class="overflow-x-auto">
            <table class="w-full">
              <thead class="bg-gray-50">
                <tr>
                  <th
                    class="px-6 py-3 text-left text-sm font-medium text-gray-500"
                  >
                    Client
                  </th>
                  <th
                    class="px-6 py-3 text-left text-sm font-medium text-gray-500"
                  >
                    Contact
                  </th>
                  <th
                    class="px-6 py-3 text-left text-sm font-medium text-gray-500"
                  >
                    ID Number
                  </th>
                  <th
                    class="px-6 py-3 text-left text-sm font-medium text-gray-500"
                  >
                    Cases
                  </th>
                  <th
                    class="px-6 py-3 text-left text-sm font-medium text-gray-500"
                  >
                    Status
                  </th>
                  <th
                    class="px-6 py-3 text-right text-sm font-medium text-gray-500"
                  >
                    Actions
                  </th>
                </tr>
              </thead>
              <tbody id="clientTableBody" class="divide-y divide-gray-200">
                <!-- Dynamically generated rows will be inserted here -->
              </tbody>
            </table>
          </div>
        </div>
      </section>
    </main>

    <script>
      function loadClients() {
        const clients = JSON.parse(localStorage.getItem("clients")) || [];
        const tbody = document.getElementById("clientTableBody");
        tbody.innerHTML = "";

        if (clients.length === 0) {
          tbody.innerHTML = `
          <tr class="animate-slide-in">
            <td colspan="6" class="text-center p-4 text-gray-500">
              No clients found.
            </td>
          </tr>`;
        } else {
          clients.forEach((client, index) => {
            const row = document.createElement("tr");
            row.className =
              "hover:bg-blue-50 transition-colors animate-slide-in";
            row.style.animationDelay = 0.1 + index * 0.1 + "s";

            row.innerHTML = `
            <td class="px-6 py-4">
              <div class="flex items-center space-x-4">
                <img
                  src="${
                    client.image
                      ? client.image
                      : "https://via.placeholder.com/40"
                  }"
                  alt="Client"
                  class="w-10 h-10 rounded-full border border-gray-200"
                />
                <div>
                  <div class="font-medium">${client.name}</div>
                  <div class="text-sm text-gray-500">${client.type}</div>
                </div>
              </div>
            </td>
            <td class="px-6 py-4">
              <div class="text-sm">${client.email}</div>
              <div class="text-sm text-gray-500">${client.phone}</div>
            </td>
            <td class="px-6 py-4">${client.id}</td>
            <td class="px-6 py-4">
              <div class="flex flex-wrap gap-2">
                <span class="px-2 py-1 bg-gray-100 text-gray-600 text-xs rounded-full">
                  No Cases
                </span>
              </div>
            </td>
            <td class="px-6 py-4">
              <span
                class="px-2 py-1 ${
                  client.status === "Active"
                    ? "bg-green-100 text-green-600"
                    : "bg-yellow-100 text-yellow-600"
                } text-xs rounded-full"
              >
                ${client.status}
              </span>
            </td>
            <td class="px-6 py-4 text-right">
              <div class="flex justify-end space-x-2">
                <button
                  class="p-2 hover:bg-blue-100 rounded-lg text-purple-600"
                  title="Edit"
                  onclick="previewClient(${index}, 'edit')"
                >
                  <span class="mdi mdi-pencil"></span>
                </button>
                <button
                  class="p-2 hover:bg-blue-100 rounded-lg text-purple-600"
                  title="View Details"
                  onclick="previewClient(${index}, 'view')"
                >
                  <span class="mdi mdi-eye"></span>
                </button>
                <button
                  class="p-2 hover:bg-red-100 rounded-lg text-red-600"
                  title="Delete"
                  onclick="deleteClient(${index})"
                >
                  <span class="mdi mdi-delete"></span>
                </button>
              </div>
            </td>
          `;
            tbody.appendChild(row);
          });
        }
      }

      // Navigate to client-preview.html with ID & mode
      function previewClient(index, mode) {
        const clients = JSON.parse(localStorage.getItem("clients")) || [];
        const client = clients[index];
        if (!client) return;
        // Pass ID and mode to the preview page
        window.location.href = `client-preview.html?id=${client.id}&mode=${mode}`;
      }

      function deleteClient(index) {
        let clients = JSON.parse(localStorage.getItem("clients")) || [];
        clients.splice(index, 1);
        localStorage.setItem("clients", JSON.stringify(clients));
        loadClients();
      }

      document.addEventListener("DOMContentLoaded", loadClients);
    </script>
  </body>
</html>
